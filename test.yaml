data:
  # ... other config ...

  # CORRECT FORMATTING:
  resource.customizations.actions.batch_Job: |
    discovery.lua: |
      actions = {}
      if obj.metadata.labels and obj.metadata.labels["argocd.custom-action/retryable"] == "true" then
        actions["retry-verification"] = {
          ["title"] = "Retry Verification",
          ["icon"] = "fa-redo",
          ["description"] = "Creates a new copy of this job to re-run verification"
        }
      end
      return actions

    definitions:
      - name: retry-verification
        action.lua: |
          local os = require("os")
          local newJob = {}
          newJob.apiVersion = obj.apiVersion
          newJob.kind = obj.kind
          newJob.metadata = {}
          newJob.metadata.name = obj.metadata.name .. "-retry-" .. os.time()
          newJob.metadata.namespace = obj.metadata.namespace
          newJob.metadata.labels = obj.metadata.labels
          newJob.metadata.annotations = obj.metadata.annotations
          newJob.spec = obj.spec
          newJob.spec.selector = nil
          if newJob.spec.template.metadata.labels then
            newJob.spec.template.metadata.labels["controller-uid"] = nil
          end
          return newJob