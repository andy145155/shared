-- 1. Initialize annotations (either deep copy or empty table)
if obj.metadata.annotations then
    newJob.metadata.annotations = deepCopy(obj.metadata.annotations)
    
    -- 2. Remove unwanted keys (Cleanup)
    newJob.metadata.annotations["argocd.argoproj.io/hook"] = nil
    newJob.metadata.annotations["argocd.argoproj.io/hook-delete-policy"] = nil
    newJob.metadata.annotations["kubectl.kubernetes.io/last-applied-configuration"] = nil

    -- 3. Handle Tracking ID logic specifically
    if newJob.metadata.annotations["argocd.argoproj.io/tracking-id"] then
        local oldId = newJob.metadata.annotations["argocd.argoproj.io/tracking-id"]
        newJob.metadata.annotations["argocd.argoproj.io/tracking-id"] = oldId .. suffix
    end
else
    newJob.metadata.annotations = {}
end

-- 4. Apply common options (Always applies to newJob)
newJob.metadata.annotations["argocd.argoproj.io/compare-options"] = "IgnoreExtraneous"
newJob.metadata.annotations["argocd.argoproj.io/sync-options"] = "Prune=false"
