apiVersion: v1
kind: Service
metadata:
  name: external-dns-test-service
  namespace: kong-template-service
  labels:
    app.kubernetes.io/instance: template-service
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: kong
    app.kubernetes.io/version: "3.4"
    enable-metrics: "true"
    helm.sh/chart: kong-2.47.0
  annotations:
    # The script will read this value to know what to verify in Route53
    external-dns.alpha.kubernetes.io/hostname: external-dns-test.api.kong.dmz.ap-east-1.dev-mox.com
    service.beta.kubernetes.io/aws-load-balancer-scheme: internal
    service.beta.kubernetes.io/aws-load-balancer-type: external
    service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip
spec:
  type: LoadBalancer
  ports:
    - name: kong-proxy-tls-test
      port: 443
      protocol: TCP
      targetPort: 8443
  selector:
    app.kubernetes.io/component: template-service
    app.kubernetes.io/instance: template-service
    app.kubernetes.io/name: kong